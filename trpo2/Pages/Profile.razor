@page "/Profile"
@using trpo2.Models
@inject TourAgencyContext dbContext
@inject Microsoft.JSInterop.IJSRuntime JSRuntime
@using Microsoft.EntityFrameworkCore;
@using trpo2.Data;
@inject UserService userService;

<Header />

<div class="profile-container">
    @if (CurrentUser != null)
    {
            <p class="nameee">Имя:</p><br />
            <h1 class="Name">@CurrentUser.FirstName</h1>

            <p class="nameee">Фамилия: </p><br />
            <h1 class="SurName">@CurrentUser.LastName</h1>

            <p class="nameee">Почта:</p><br />
            <h1 class="SurName">@CurrentUser.Email</h1>

            <p class="nameee">Номер телефона:</p> <br />
            <h1 class="SurName">@CurrentUser.Phone</h1>

        <div class="buttons"> 
            <div class="editdiv"> 
                <button @onclick="EditProfile" class="editbut">Редактировать профиль</button>
            </div>

            <div class="editdiv">
                <button @onclick="Cancel" class="editbut">Выйти из аккаунта</button>
            </div>
        </div>
    }
    else
    {
        <p>Данные пользователя не загружены.</p>
    }
</div>

@code {
    [Inject]

    NavigationManager NavigationManager { get; set; }

    private Customer CurrentUser;

    protected override void OnInitialized()
    {
        CurrentUser = userService.GetCurrentUser();
    }

    private void EditProfile()
    {
        NavigationManager.NavigateTo("/EditPage");
    }

    private void Cancel()
    {
        NavigationManager.NavigateTo("/");
    }
}